#!/bin/bash
# Pre-tool-use hook generated by Aircana
# This hook runs before any tool is executed

# Get the tool name and parameters
TOOL_NAME="$1"
TOOL_PARAMS="$2"

# Log the tool usage (optional)
echo "$(date): About to use tool: $TOOL_NAME" >> ~/.aircana/hooks.log

# Basic validation example
case "$TOOL_NAME" in
  "Bash")
    # Add validation for bash commands
    if echo "$TOOL_PARAMS" | grep -q "rm -rf /"; then
      cat << EOF
{
  "hookSpecificOutput": {
    "hookEventName": "PreToolUse",
    "permissionDecision": "deny",
    "permissionDecisionReason": "Dangerous command detected: rm -rf /"
  }
}
EOF
      exit 0
    fi
    ;;
  "Edit"|"Write")
    # Validate file operations
    # Add custom validation logic here
    ;;
esac

# Allow the tool to proceed
cat << EOF
{
  "hookSpecificOutput": {
    "hookEventName": "PreToolUse",
    "permissionDecision": "allow"
  }
}
EOF